# logchecklint

Go-–ª–∏–Ω—Ç–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥-–∑–∞–ø–∏—Å–µ–π, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å [golangci-lint](https://golangci-lint.run/).

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã –ª–æ–≥–≥–µ—Ä–æ–≤ (`log/slog`, `go.uber.org/zap`) –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º.

## –ü—Ä–∞–≤–∏–ª–∞

| # | –ü—Ä–∞–≤–∏–ª–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---------|----------|
| 1 | –°—Ç—Ä–æ—á–Ω–∞—è –±—É–∫–≤–∞ | –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã |
| 2 | –¢–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π | –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ |
| 3 | –ë–µ–∑ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ | –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∏–ª–∏ —ç–º–æ–¥–∑–∏ |
| 4 | –ë–µ–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |

### –ü—Ä–∏–º–µ—Ä—ã

```go
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
slog.Info("Starting server on port 8080")  // –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã
slog.Info("–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞")                // –Ω–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
slog.Info("server started!üöÄ")             // —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∏ —ç–º–æ–¥–∑–∏
slog.Info("user password: " + password)    // —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
slog.Info("starting server on port 8080")
slog.Info("starting server")
slog.Info("server started")
slog.Info("user authenticated successfully")
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ö–∞–∫ standalone-–ª–∏–Ω—Ç–µ—Ä

```bash
# –°–±–æ—Ä–∫–∞
go build -o bin/logchecklint ./cmd/logchecklint

# –ó–∞–ø—É—Å–∫ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ
./bin/logchecklint ./...
```

### –ö–∞–∫ –ø–ª–∞–≥–∏–Ω –¥–ª—è golangci-lint (Module Plugin System)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±.** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [Module Plugin System](https://golangci-lint.run/docs/plugins/module-plugins/).

#### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.custom-gcl.yml` –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```yaml
version: v2.10.1

plugins:
  - module: 'github.com/manakovpavel1997-lab/logchecklint'
    import: 'github.com/manakovpavel1997-lab/logchecklint'
    version: v0.1.0  # —É–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ `.golangci.yml`

```yaml
version: "2"

linters:
  default: none
  enable:
    - logchecklint

  settings:
    custom:
      logchecklint:
        type: module
        description: "Linter for checking log messages"
        original-url: github.com/manakovpavel1997-lab/logchecklint
        settings:
          disable_lowercase_check: false
          disable_english_check: false
          disable_special_char_check: false
          disable_sensitive_check: false
          custom_sensitive_keywords:
            - "bank_account"
            - "internal_id"
```

#### 3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

```bash
# –°–±–æ—Ä–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ golangci-lint —Å –ø–ª–∞–≥–∏–Ω–æ–º
golangci-lint custom

# –ó–∞–ø—É—Å–∫
./custom-gcl run ./...
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ß–µ—Ä–µ–∑ —Å–µ–∫—Ü–∏—é `settings` –≤ `.golangci.yml` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `disable_lowercase_check` | `bool` | `false` | –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å—Ç—Ä–æ—á–Ω—É—é –±—É–∫–≤—É |
| `disable_english_check` | `bool` | `false` | –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ |
| `disable_special_char_check` | `bool` | `false` | –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã |
| `disable_sensitive_check` | `bool` | `false` | –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| `custom_sensitive_keywords` | `[]string` | `[]` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ |

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ª–æ–≥–≥–µ—Ä—ã

- **log/slog** ‚Äî `slog.Info()`, `slog.Error()`, `slog.Warn()`, `slog.Debug()`, `slog.Log()`
- **go.uber.org/zap** ‚Äî `logger.Info()`, `logger.Error()`, `sugar.Infow()`, `sugar.Infof()` –∏ –¥—Ä—É–≥–∏–µ
- **–õ—é–±–æ–π –ª–æ–≥–≥–µ—Ä** —Å –≤—ã–∑–æ–≤–∞–º–∏ –≤–∏–¥–∞ `log.Info("message")`, `logger.Error("message")`

## –ê–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (SuggestedFixes)

–õ–∏–Ω—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è:
- **–ü—Ä–∞–≤–∏–ª–æ 1**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç –ø–µ—Ä–≤—É—é –∑–∞–≥–ª–∞–≤–Ω—É—é –±—É–∫–≤—É –Ω–∞ —Å—Ç—Ä–æ—á–Ω—É—é
- **–ü—Ä–∞–≤–∏–ª–æ 3**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∏ —ç–º–æ–¥–∑–∏

–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--fix`:

```bash
./custom-gcl run --fix ./...
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone https://github.com/manakovpavel1997-lab/logchecklint.git
cd logchecklint

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make deps

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make test

# –°–±–æ—Ä–∫–∞ standalone-–±–∏–Ω–∞—Ä–Ω–∏–∫–∞
make build

# –°–±–æ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è golangci-lint
make build-plugin
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
logchecklint/
‚îú‚îÄ‚îÄ cmd/logchecklint/         # standalone entrypoint
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ pkg/analyzer/             # –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.go           # –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (AST traversal, reporting)
‚îÇ   ‚îú‚îÄ‚îÄ analyzer_test.go      # –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (analysistest)
‚îÇ   ‚îú‚îÄ‚îÄ rules.go              # —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ rules_test.go         # unit-—Ç–µ—Å—Ç—ã –ø—Ä–∞–≤–∏–ª
‚îú‚îÄ‚îÄ plugin.go                 # —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è golangci-lint
‚îú‚îÄ‚îÄ testdata/                 # —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è analysistest
‚îú‚îÄ‚îÄ .custom-gcl.yml           # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ –ø–ª–∞–≥–∏–Ω–∞
‚îú‚îÄ‚îÄ .golangci.yml             # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è golangci-lint
‚îú‚îÄ‚îÄ .github/workflows/ci.yml  # CI/CD –ø–∞–π–ø–ª–∞–π–Ω
‚îú‚îÄ‚îÄ Makefile                  # –∫–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ go.mod
‚îî‚îÄ‚îÄ README.md
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
